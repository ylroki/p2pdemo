<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>&#35814;&#32454;&#35774;&#35745;</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="&#35814;&#32454;&#35774;&#35745;"><div class="titlepage"><div><div><h2 class="title"><a name="idm14816536"></a>&#35814;&#32454;&#35774;&#35745;</h2></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#idp124472">1 &#20844;&#20849;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp124728">1.1 &#31243;&#24207;&#25551;&#36848;</a></span></dt><dt><span class="sect2"><a href="#idp730656">1.2 &#35774;&#35745;&#26041;&#27861;</a></span></dt><dt><span class="sect2"><a href="#idp2849904">1.3 &#25509;&#21475;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp114696">2 &#26381;&#21153;&#22120;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp114992">2.1 &#31243;&#24207;&#25551;&#36848;</a></span></dt><dt><span class="sect2"><a href="#idp115632">2.2 &#35774;&#35745;&#26041;&#27861;</a></span></dt><dt><span class="sect2"><a href="#idp116936">2.3 &#27969;&#31243;&#36923;&#36753;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp118624">3 &#23458;&#25143;&#31471;&#21069;&#31471;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp118936">3.1 &#37197;&#32622;&#25991;&#20214;</a></span></dt><dt><span class="sect2"><a href="#idp51720">3.2 &#27969;&#31243;&#36923;&#36753;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp53416">4 &#23458;&#25143;&#31471;&#21518;&#31471;&#20027;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp53736">4.1 &#31243;&#24207;&#25551;&#36848;</a></span></dt><dt><span class="sect2"><a href="#idp54592">4.2 &#35774;&#35745;&#26041;&#27861;</a></span></dt><dt><span class="sect2"><a href="#idp76480">4.3 &#27969;&#31243;&#36923;&#36753;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp80064">5 &#19979;&#36733;&#25991;&#20214;&#31649;&#29702;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp80384">5.1 &#35774;&#35745;&#26041;&#27861;</a></span></dt><dt><span class="sect2"><a href="#idp3442648">5.2 &#27969;&#31243;&#36923;&#36753;</a></span></dt><dt><span class="sect2"><a href="#idp3445856">5.3 &#25509;&#21475;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp3451552">6 &#25991;&#20214;&#19978;&#20256;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp3451856">6.1 &#27969;&#31243;&#36923;&#36753;</a></span></dt><dt><span class="sect2"><a href="#idp3452568">6.2 &#25509;&#21475;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp3455088">7 &#21327;&#35758;&#35299;&#26512;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp3455760">7.1 &#21327;&#35758;&#30340;&#35814;&#32454;&#23450;&#20041;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp3484504">8 &#25991;&#20214;&#31995;&#32479;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp3484760">8.1 &#35774;&#35745;&#26041;&#27861;</a></span></dt></dl></dd><dt><span class="sect1"><a href="#idp3487624">9 Kad&#32593;&#32476;&#27169;&#22359;</a></span></dt><dd><dl><dt><span class="sect2"><a href="#idp3487880">9.1 Kad&#21327;&#35758;&#30340;&#35814;&#32454;&#23450;&#20041;</a></span></dt><dt><span class="sect2"><a href="#idp3520224">9.2 &#35774;&#35745;&#26041;&#27861;</a></span></dt></dl></dd></dl></div><div class="sect1" title="1 &#20844;&#20849;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp124472"></a>1 &#20844;&#20849;&#27169;&#22359;</h2></div></div></div><div class="sect2" title="1.1 &#31243;&#24207;&#25551;&#36848;"><div class="titlepage"><div><div><h3 class="title"><a name="idp124728"></a>1.1 &#31243;&#24207;&#25551;&#36848;</h3></div></div></div><p>&#23545;&#31995;&#32479;API&#36827;&#34892;&#23553;&#35013;&#65292;&#25552;&#20379;&#19968;&#20123;&#36890;&#29992;&#30340;&#31867;&#12290;</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#31867;&#21517;</th><th>&#21151;&#33021;</th></tr></thead><tbody><tr><td>CAutoLock</td><td>&#20316;&#20026;&#20989;&#25968;&#20013;&#30340;&#23616;&#37096;&#23545;&#35937;&#65292;&#22312;&#29983;&#23384;&#26399;&#26399;&#38388;&#23545;&#32473;&#23450;&#20114;&#26021;&#37327;&#21152;&#38145;&#65292;
								&#29983;&#23384;&#26399;&#32467;&#26463;&#21518;&#33258;&#21160;&#37322;&#25918;&#38145;</td></tr><tr><td>CDatabase</td><td>&#23553;&#35013;sqlite3&#25968;&#25454;&#24211;&#30340;&#25509;&#21475;</td></tr><tr><td>CMemoryStream</td><td>&#23553;&#35013;&#23545;&#20869;&#23384;&#20013;&#32531;&#20914;&#21306;&#30340;&#35835;&#20889;&#25805;&#20316;</td></tr><tr><td>CFileStream</td><td>&#23553;&#35013;&#23545;&#25991;&#20214;&#30340;&#35835;&#20889;&#25805;&#20316;</td></tr><tr><td>CUInt128</td><td>&#23454;&#29616;128-bit&#30340;&#26080;&#31526;&#21495;&#25972;&#22411;&#25968;&#30340;&#21021;&#22987;&#21270;&#65292;&#31639;&#26415;&#36816;&#31639;&#65292;&#20301;&#36816;&#31639;&#31561;&#31561;</td></tr><tr><td>CIDHelper</td><td>&#23454;&#29616;id&#29983;&#25104;&#22120;&#65292;&#21487;&#20197;&#20135;&#29983;&#19968;&#20010;&#26410;&#34987;&#20351;&#29992;&#30340;id</td></tr></tbody></table></div></div><div class="sect2" title="1.2 &#35774;&#35745;&#26041;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="idp730656"></a>1.2 &#35774;&#35745;&#26041;&#27861;</h3></div></div></div><div class="sect3" title="1.2.1 CAutoLock"><div class="titlepage"><div><div><h4 class="title"><a name="idp730952"></a>1.2.1 CAutoLock</h4></div></div></div><p>&#33258;&#21160;&#21152;&#38145;&#19982;&#37322;&#25918;&#30340;&#21407;&#29702;&#65306;&#20197;&#20114;&#26021;&#37327;&#20316;&#20026;&#26500;&#36896;&#20989;&#25968;&#30340;&#21442;&#25968;&#65292;
					&#26500;&#36896;&#20989;&#25968;&#35843;&#29992;pthread_mutex_lock()&#23545;&#35813;&#20114;&#26021;&#37327;&#21152;&#38145;&#65292;
					&#26512;&#26500;&#20989;&#25968;&#20013;&#35843;&#29992;pthread_mutex_unlock()&#35299;&#38145;&#12290;
					&#22312;&#20989;&#25968;&#20013;&#29983;&#25104;CAutoLock&#30340;&#23616;&#37096;&#23545;&#35937;&#65292;&#20989;&#25968;&#23558;&#25345;&#26377;&#35813;&#20114;&#26021;&#37327;&#65292;
					&#20989;&#25968;&#36820;&#22238;&#21518;&#65292;CAutoLock&#30340;&#23616;&#37096;&#23545;&#35937;&#29983;&#23384;&#26399;&#32467;&#26463;&#65292;&#35843;&#29992;&#26512;&#26500;&#20989;&#25968;&#65292;&#37322;&#25918;&#20114;&#26021;&#37327;&#12290;</p></div><div class="sect3" title="1.2.2 CDatabase"><div class="titlepage"><div><div><h4 class="title"><a name="idp732272"></a>1.2.2 CDatabase</h4></div></div></div><p>&#23553;&#35013;sqlite3&#25968;&#25454;&#24211;&#30340;&#25509;&#21475;&#65292;&#23558;sqlite3&#23545;&#35937;&#25351;&#38024;&#20316;&#20026;CDatabase&#30340;&#25104;&#21592;&#21464;&#37327;&#65292;
					&#19981;&#35753;&#20854;&#26292;&#38706;&#22312;&#22806;&#37096;&#12290;</p></div><div class="sect3" title="1.2.3 CMemoryStream"><div class="titlepage"><div><div><h4 class="title"><a name="idp732936"></a>1.2.3 CMemoryStream</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25104;&#21592;&#21464;&#37327;</th><th>&#27880;&#37322;</th></tr></thead><tbody><tr><td>void* m_Buffer;</td><td>&#25351;&#21521;&#32531;&#20914;&#21306;&#30340;&#22320;&#22336;</td></tr><tr><td>Int64 m_Size;</td><td>&#32531;&#20914;&#21306;&#20013;&#24050;&#26377;&#20869;&#23481;&#30340;&#22823;&#23567;</td></tr><tr><td>Int64 m_MaxSize;</td><td>&#32531;&#20914;&#21306;&#30340;&#33539;&#22260;</td></tr><tr><td>Int64 m_Pointer;</td><td>&#32531;&#20914;&#21306;&#27491;&#22312;&#35835;&#20889;&#30340;&#20559;&#31227;&#37327;</td></tr></tbody></table></div><p>&#32771;&#34385;&#21040;&#32593;&#32476;&#21327;&#35758;&#20013;&#20256;&#36755;&#19981;&#21516;&#30340;&#25972;&#22411;&#25968;&#25454;&#65292;&#26377;&#22686;&#21152;&#32531;&#20914;&#21306;&#30340;&#26684;&#24335;&#21270;&#35835;&#20889;&#65292;
					&#21033;&#29992;template&#25903;&#25345;&#19981;&#21516;&#23383;&#33410;&#38271;&#24230;&#30340;&#25972;&#22411;&#31867;&#22411;&#25968;&#25454;&#35835;&#20889;&#12290;</p><pre class="screen">
	template &lt;typename Integer&gt;
	inline Integer ReadInteger()
	{
		Integer i;
		ReadBuffer(&amp;i, sizeof(i));
		return i;
	}

	bool CMemoryStream::ReadBuffer(void* buffer, Int64 size)
	{
		if (m_Pointer + size &gt; m_Size)
			return false;
		memcpy(buffer, (char*)m_Buffer + m_Pointer, size);
		m_Pointer += size;
		return true;
	}
				</pre><p>&#23558;&#26684;&#24335;&#21270;&#35835;&#36716;&#21270;&#20026;&#36890;&#29992;&#30340;&#20869;&#23384;&#25335;&#36125;&#65292;&#20889;&#25805;&#20316;&#31867;&#20284;&#12290;</p></div><div class="sect3" title="1.2.4 CFileStream"><div class="titlepage"><div><div><h4 class="title"><a name="idp2682632"></a>1.2.4 CFileStream</h4></div></div></div><p>&#31616;&#21333;&#23553;&#35013;UNIX&#30340;&#25991;&#20214;I/O&#35835;&#20889;&#25805;&#20316;&#65292;&#25991;&#20214;&#25551;&#36848;&#31526;&#20316;&#20026;CFileStream&#30340;
					&#31169;&#26377;&#25104;&#21592;&#21464;&#37327;&#65292;&#19981;&#26292;&#38706;&#32473;&#22806;&#37096;&#12290;</p><p>&#19982;CMemoryStream&#31867;&#20284;&#65292;&#29992;template&#20989;&#25968;&#25903;&#25345;&#26684;&#24335;&#21270;&#35835;&#20889;&#12290;</p></div><div class="sect3" title="1.2.5 CUInt128"><div class="titlepage"><div><div><h4 class="title"><a name="idp3082360"></a>1.2.5 CUInt128</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25104;&#21592;&#21464;&#37327;</th><th>&#27880;&#37322;</th></tr></thead><tbody><tr><td>UInt64 m_High;</td><td>&#34920;&#31034;&#39640;64-bit&#30340;&#20540;</td></tr><tr><td>UInt64 m_Low;</td><td>&#34920;&#31034;&#20302;64-bit&#30340;&#20540;</td></tr></tbody></table></div><p>Kad&#32593;&#32476;&#20013;&#30340;NodeID&#65292;Key&#26159;128-bit&#25968;&#20540;&#65292;&#38656;&#35201;&#23553;&#35013;&#36825;&#26679;&#19968;&#20010;&#31867;
					&#26469;&#25903;&#25345;128-bit&#25968;&#20540;&#30340;&#20301;&#36816;&#31639;&#12289;&#24067;&#23572;&#36816;&#31639;&#31561;&#12290;</p><p>CUInt128&#31867;&#20013;&#21253;&#21547;&#20004;&#20010;&#26080;&#31526;&#21495;64-bit&#25972;&#22411;&#25968;&#65292;&#20998;&#21035;&#34920;&#31034;&#39640;64-bit&#20197;&#21450;&#20302;64-bit&#20540;&#12290;</p><p>&#25903;&#25345;CUInt128&#23545;&#35937;&#21040;MD5&#21704;&#24076;&#20018;&#30340;&#20114;&#30456;&#36716;&#25442;&#12290;</p></div><div class="sect3" title="1.2.6 CIDHelper"><div class="titlepage"><div><div><h4 class="title"><a name="idp2025264"></a>1.2.6 CIDHelper</h4></div></div></div><p>&#20107;&#21153;&#31649;&#29702;&#31995;&#32479;&#38656;&#35201;&#20026;&#21508;&#20010;&#20107;&#21153;&#20998;&#37197;&#29420;&#31435;&#30340;TaskID&#65292;
					&#31867;&#20284;&#20110;UNIX&#31995;&#32479;&#20013;&#20026;&#25171;&#24320;&#25991;&#20214;&#20998;&#37197;&#29420;&#31435;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#12290;
					&#29992;CIDHelper&#23553;&#35013;&#20998;&#37197;ID&#30340;&#26041;&#27861;&#65292;CIDHelper&#21253;&#21547;&#19968;&#20010;&#38745;&#24577;&#34920;&#25104;&#21592;&#65292;&#35760;&#24405;&#21508;&#20010;ID&#20540;&#26159;&#21542;
					&#34987;&#21344;&#29992;&#65292;&#20998;&#37197;ID&#26102;&#20174;&#23567;&#21040;&#22823;&#25195;&#25551;&#36825;&#20010;&#34920;&#65292;&#33719;&#24471;&#26368;&#23567;&#30340;&#26410;&#34987;&#20351;&#29992;&#30340;ID&#65292;
					&#27880;&#24847;&#27599;&#20010;&#21344;&#29992;ID&#30340;&#23545;&#35937;&#37322;&#25918;&#26102;&#65292;&#35201;&#20027;&#21160;&#35843;&#29992;CIDHelper&#30340;&#37322;&#25918;ID&#30340;&#20989;&#25968;&#12290;</p><pre class="screen">
	short CIDHelper::New()
	{
		CAutoLock lock(&amp;m_Lock);
		for (short i = 0; i &lt; MAX_ID; ++i)
			if (m_Use[i] == false)
			{
				m_Use[i] = true;
				return i;
			}
	}

	void CIDHelper::Delete(short id)
	{
		CAutoLock lock(&amp;m_Lock);
		if (id &gt;=0 &amp;&amp; id &lt; MAX_ID)	
			m_Use[id] = false;
	}
				</pre></div></div><div class="sect2" title="1.3 &#25509;&#21475;"><div class="titlepage"><div><div><h3 class="title"><a name="idp2849904"></a>1.3 &#25509;&#21475;</h3></div></div></div><p>&#20844;&#20849;&#27169;&#22359;&#20027;&#35201;&#20026;&#20854;&#20182;&#27169;&#22359;&#25552;&#20379;&#25509;&#21475;&#65292;&#25152;&#26377;&#24517;&#35201;&#23545;&#23427;&#30340;&#25509;&#21475;&#20570;&#35814;&#32454;&#25551;&#36848;&#12290;</p><div class="sect3" title="1.3.1 CDatabase&#25509;&#21475;"><div class="titlepage"><div><div><h4 class="title"><a name="idp1430256"></a>1.3.1 CDatabase&#25509;&#21475;</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25509;&#21475;</th><th>&#21151;&#33021;</th></tr></thead><tbody><tr><td>bool Open(const char* filename);</td><td>&#25171;&#24320;&#25968;&#25454;&#24211;&#25991;&#20214;</td></tr><tr><td>bool Execute(const char* sql, 
						ExecuteCallback func = NULL, void* arg = NULL);</td><td>&#25191;&#34892;sql&#35821;&#21477;</td></tr><tr><td>bool GetTable(const char* sql, char*** result, int* nRow, int* nCol);</td><td>&#25968;&#25454;&#24211;&#26597;&#35810;&#26041;&#27861;</td></tr><tr><td>bool CreateTable(const char* tbName, const char* colDef);</td><td>&#22312;&#24050;&#25171;&#24320;&#30340;&#25968;&#25454;&#24211;&#20013;&#21019;&#24314;&#34920;</td></tr><tr><td>void Close();</td><td>&#20851;&#38381;&#25968;&#25454;&#24211;</td></tr></tbody></table></div></div><div class="sect3" title="1.3.2 CUInt128&#25509;&#21475;"><div class="titlepage"><div><div><h4 class="title"><a name="idp109256"></a>1.3.2 CUInt128&#25509;&#21475;</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25509;&#21475;</th><th>&#21151;&#33021;</th></tr></thead><tbody><tr><td>short GetBit(short bit);</td><td>&#33719;&#24471;&#32473;&#23450;&#20301;&#19978;&#30340;&#20540;</td></tr><tr><td>static CUInt128 FromMD5(const char* md5);</td><td>&#20174;MD5&#21704;&#24076;&#20018;&#29983;&#25104;CUInt128&#23545;&#35937;</td></tr><tr><td>std::string ToMD5();</td><td>CUInt128&#23545;&#35937;&#36716;&#20026;MD5&#21704;&#24076;&#20018;</td></tr><tr><td>CUInt128&amp; operator=(const CUInt128&amp; op);</td><td>&#36171;&#20540;</td></tr><tr><td>friend bool operator==(const CUInt128&amp; op1, const CUInt128&amp; op2);</td><td>&#24067;&#23572;&#36816;&#31639;&#30456;&#31561;</td></tr><tr><td>friend bool operator&lt;(const CUInt128&amp; op1, const CUInt128&amp; op2);</td><td>&#24067;&#23572;&#36816;&#31639;&#23567;&#20110;</td></tr><tr><td>friend CUInt128 operator^(const CUInt128&amp; op1, const CUInt128&amp; op2);</td><td>&#20301;&#24322;&#25110;</td></tr></tbody></table></div></div></div></div><div class="sect1" title="2 &#26381;&#21153;&#22120;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp114696"></a>2 &#26381;&#21153;&#22120;&#27169;&#22359;</h2></div></div></div><div class="sect2" title="2.1 &#31243;&#24207;&#25551;&#36848;"><div class="titlepage"><div><div><h3 class="title"><a name="idp114992"></a>2.1 &#31243;&#24207;&#25551;&#36848;</h3></div></div></div><p>&#26381;&#21153;&#22120;&#31471;&#25509;&#25910;&#26469;&#33258;&#23458;&#25143;&#31471;&#30340;&#35831;&#27714;&#65292;&#26681;&#25454;&#28040;&#24687;&#20869;&#23481;&#20316;&#20986;&#21709;&#24212;&#12290;</p></div><div class="sect2" title="2.2 &#35774;&#35745;&#26041;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="idp115632"></a>2.2 &#35774;&#35745;&#26041;&#27861;</h3></div></div></div><p>&#26381;&#21153;&#22120;&#30340;&#20027;&#35201;&#36923;&#36753;&#23601;&#26159;&#25509;&#25910;&#23458;&#25143;&#31471;&#30340;&#35831;&#27714;&#28040;&#24687;&#20877;&#22788;&#29702;&#65292;
				&#25152;&#20197;&#25509;&#25910;&#35831;&#27714;&#28040;&#24687;&#26159;&#19968;&#20010;&#19968;&#30452;&#24490;&#29615;&#30340;&#20027;&#23548;&#25805;&#20316;&#65292;
				&#25509;&#25910;&#28040;&#24687;&#21518;&#20998;&#26512;&#28040;&#24687;&#20869;&#23481;&#65292;&#35843;&#29992;&#19981;&#21516;&#30340;&#20989;&#25968;&#22788;&#29702;&#19981;&#21516;&#30340;&#28040;&#24687;&#21363;&#21487;&#12290;
				&#32771;&#34385;&#23567;&#22411;&#23616;&#22495;&#32593;&#19979;&#65292;&#26381;&#21153;&#22120;&#31471;&#19981;&#29992;&#20570;&#24471;&#22826;&#22797;&#26434;&#65292;&#21487;&#20197;&#29306;&#29298;&#19968;&#20123;&#25928;&#29575;&#65292;
				&#29992;&#19968;&#20010;&#38459;&#22622;&#30340;&#25509;&#25910;&#20989;&#25968;&#23601;&#22909;&#12290;</p></div><div class="sect2" title="2.3 &#27969;&#31243;&#36923;&#36753;"><div class="titlepage"><div><div><h3 class="title"><a name="idp116936"></a>2.3 &#27969;&#31243;&#36923;&#36753;</h3></div></div></div><div class="screenshot"><div class="mediaobject"><img src="res/server.jpeg"><div class="caption"><p>&#22270;1&#65306;Server</p></div></div></div></div></div><div class="sect1" title="3 &#23458;&#25143;&#31471;&#21069;&#31471;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp118624"></a>3 &#23458;&#25143;&#31471;&#21069;&#31471;&#27169;&#22359;</h2></div></div></div><div class="sect2" title="3.1 &#37197;&#32622;&#25991;&#20214;"><div class="titlepage"><div><div><h3 class="title"><a name="idp118936"></a>3.1 &#37197;&#32622;&#25991;&#20214;</h3></div></div></div><p>&#23458;&#25143;&#31471;&#30340;&#19968;&#20123;&#21442;&#25968;&#26159;&#21487;&#37197;&#32622;&#30340;&#65292;&#25105;&#20204;&#23558;&#21442;&#25968;&#20889;&#22312;&#37197;&#32622;&#25991;&#20214;&#20013;&#65292;
				&#30001;&#19968;&#20010;&#19987;&#38376;&#30340;&#31867;CConfig&#21435;&#35299;&#26512;&#37197;&#32622;&#25991;&#20214;&#65292;&#23558;&#21442;&#25968;&#20540;&#36171;&#32473;&#30456;&#24212;&#30340;&#25104;&#21592;&#21464;&#37327;&#12290;</p><p>&#23458;&#25143;&#31471;&#30340;&#21069;&#31471;&#20197;&#21450;&#21518;&#31471;&#37117;&#20250;&#20351;&#29992;&#21040;CConfig&#31867;&#65292;&#30001;&#20110;CConfig&#31867;&#30340;&#23454;&#29616;
				&#36739;&#20026;&#31616;&#21333;&#65292;&#21151;&#33021;&#29420;&#31435;&#65292;&#25105;&#20204;&#23558;&#23427;&#24402;&#20026;&#21069;&#31471;&#27169;&#22359;&#30340;&#19968;&#37096;&#20998;&#65292;&#21487;&#20197;&#26356;&#26089;&#22320;&#27979;&#35797;&#23427;&#12290;</p><p></p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25104;&#21592;&#21464;&#37327;</th><th>&#27880;&#37322;</th></tr></thead><tbody><tr><td>std::string m_LocalIP;</td><td>&#21518;&#31471;&#25509;&#25910;&#21069;&#31471;&#28040;&#24687;&#30340;IP&#22320;&#22336;&#65292;&#40664;&#35748;127.0.0.1</td></tr><tr><td>unsigned short m_LocalPort;</td><td>&#21518;&#31471;&#25509;&#25910;&#21069;&#31471;&#28040;&#24687;&#30340;&#31471;&#21475;</td></tr><tr><td>std::string m_PeerIP;</td><td>&#23458;&#25143;&#31471;&#22312;&#23616;&#22495;&#32593;&#20013;&#30340;IP&#22320;&#22336;</td></tr><tr><td>unsigned short m_PeerPort;</td><td>&#23458;&#25143;&#31471;&#30417;&#21548;&#25991;&#20214;&#20256;&#36755;&#30340;&#31471;&#21475;</td></tr><tr><td>unsigned short m_MinPort;</td><td>&#23458;&#25143;&#31471;&#19979;&#36733;&#27169;&#22359;&#31471;&#21475;&#30340;&#26368;&#23567;&#33539;&#22260;</td></tr><tr><td>unsigned short m_MaxPort;</td><td>&#23458;&#25143;&#31471;&#19979;&#36733;&#27169;&#22359;&#31471;&#21475;&#30340;&#26368;&#22823;&#33539;&#22260;</td></tr><tr><td>int m_UpdatePeriod;</td><td>&#25991;&#20214;&#31995;&#32479;&#26356;&#26032;&#30340;&#21608;&#26399;&#65292;&#21333;&#20301;&#20998;&#38047;</td></tr><tr><td>std::string m_Directory;</td><td>&#36164;&#28304;&#25152;&#22312;&#30446;&#24405;</td></tr><tr><td>std::string m_CacheDir;</td><td>&#25968;&#25454;&#24211;&#25991;&#20214;&#23384;&#25918;&#30446;&#24405;</td></tr><tr><td>std::string m_ServerIP;</td><td>&#26381;&#21153;&#22120;IP&#22320;&#22336;</td></tr><tr><td>unsigned short m_ServerPort;</td><td>&#26381;&#21153;&#22120;&#31471;&#21475;</td></tr><tr><td>unsigned short m_KadPort;</td><td>&#23458;&#25143;&#31471;Kad&#32593;&#32476;&#31471;&#21475;</td></tr></tbody></table></div></div><div class="sect2" title="3.2 &#27969;&#31243;&#36923;&#36753;"><div class="titlepage"><div><div><h3 class="title"><a name="idp51720"></a>3.2 &#27969;&#31243;&#36923;&#36753;</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1">&#25171;&#24320;&#32473;&#23450;&#25991;&#20214;</li><li class="step" title="Step 2">&#23545;&#27599;&#19968;&#34892;&#20869;&#23481;&#36827;&#34892;&#35299;&#26512;&#65292;&#25214;&#20986;&#31526;&#21512;NAME&#65306;VALUE&#24418;&#24335;&#30340;&#20869;&#23481;</li><li class="step" title="Step 3">&#26681;&#25454;NAME&#23558;VALUE&#36171;&#20540;&#32473;&#30456;&#24212;&#30340;&#21464;&#37327;</li></ol></div></div></div><div class="sect1" title="4 &#23458;&#25143;&#31471;&#21518;&#31471;&#20027;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp53416"></a>4 &#23458;&#25143;&#31471;&#21518;&#31471;&#20027;&#27169;&#22359;</h2></div></div></div><div class="sect2" title="4.1 &#31243;&#24207;&#25551;&#36848;"><div class="titlepage"><div><div><h3 class="title"><a name="idp53736"></a>4.1 &#31243;&#24207;&#25551;&#36848;</h3></div></div></div><p>&#20316;&#20026;&#23458;&#25143;&#31471;&#31243;&#24207;&#30340;&#21551;&#21160;&#27169;&#22359;&#65292;&#20351;&#23458;&#25143;&#31471;&#21518;&#31471;&#25104;&#20026;&#23432;&#25252;&#36827;&#31243;&#65292;
				&#22312;&#31243;&#24207;&#24320;&#22987;&#26102;&#21551;&#21160;&#19979;&#36733;&#25991;&#20214;&#31649;&#29702;&#27169;&#22359;&#12289;&#19978;&#20256;&#25991;&#20214;&#27169;&#22359;&#12289;Kad&#32593;&#32476;&#27169;&#22359;&#12289;&#25991;&#20214;&#31995;&#32479;&#27169;&#22359;&#65292; 
				&#20043;&#21518;&#36718;&#35810;&#25509;&#25910;&#24182;&#35299;&#26512;&#26469;&#33258;&#29992;&#25143;&#30340;&#21629;&#20196;&#65292;&#26681;&#25454;&#19981;&#21516;&#30340;&#21629;&#20196;&#20570;&#19981;&#21516;&#30340;&#25805;&#20316;&#12290;</p></div><div class="sect2" title="4.2 &#35774;&#35745;&#26041;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="idp54592"></a>4.2 &#35774;&#35745;&#26041;&#27861;</h3></div></div></div><div class="sect3" title="4.2.1 &#23432;&#25252;&#36827;&#31243;"><div class="titlepage"><div><div><h4 class="title"><a name="idp54888"></a>4.2.1 &#23432;&#25252;&#36827;&#31243;</h4></div></div></div><p>&#21487;&#20197;&#32534;&#20889;&#19968;&#20010;Daemonize&#20989;&#25968;&#23601;&#21487;&#20197;&#20351;&#24403;&#21069;&#36827;&#31243;&#25104;&#20026;&#23432;&#25252;&#36827;&#31243;&#65292;
					&#24403;&#28982;&#65292;&#20989;&#25968;&#30340;&#32534;&#20889;&#38656;&#35201;&#36981;&#23432;&#19968;&#23450;&#35268;&#21017;&#12290;</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1"><p>&#35843;&#29992;umask&#23558;&#25991;&#20214;&#27169;&#24335;&#21019;&#24314;&#23631;&#34109;&#23383;&#35774;&#32622;&#20026;0&#12290;
						&#40664;&#35748;&#30340;&#23631;&#34109;&#23383;&#21487;&#33021;&#23631;&#34109;&#20102;&#26576;&#20123;&#26435;&#38480;&#65292;&#32780;&#23432;&#25252;&#36827;&#31243;&#38656;&#35201;&#26356;&#22823;&#30340;&#26435;&#38480;&#65292;
						&#26368;&#22909;&#19968;&#24320;&#22987;&#23601;&#25918;&#24320;&#19968;&#20999;&#26435;&#38480;&#12290;</p></li><li class="step" title="Step 2"><p>&#35843;&#29992;fork&#65292;&#29238;&#36827;&#31243;&#30340;&#20195;&#30721;&#35843;&#29992;exit&#25191;&#34892;&#36864;&#20986;&#65292;&#32780;&#23376;&#36827;&#31243;&#32487;&#32493;&#25191;&#34892;&#12290;
						&#36825;&#20026;&#19979;&#38754;&#30340;&#35843;&#29992;setsid&#25552;&#20379;&#20102;&#26465;&#20214;&#65292;&#22240;&#20026;&#23376;&#36827;&#31243;&#32487;&#25215;&#20102;&#29238;&#36827;&#31243;&#30340;&#32452;ID&#65292;
						&#21516;&#26102;&#21448;&#33719;&#24471;&#20102;&#19968;&#20010;&#26032;&#30340;&#36827;&#31243;ID&#65292;&#36825;&#20445;&#35777;&#23376;&#36827;&#31243;&#19981;&#20250;&#25104;&#20026;&#36825;&#20010;&#36827;&#31243;&#32452;
						&#30340;&#32452;&#38271;&#36827;&#31243;&#12290;</p></li><li class="step" title="Step 3"><p>&#35843;&#29992;setsid&#26469;&#21019;&#24314;&#19968;&#20010;&#26032;&#20250;&#35805;&#65292;&#36825;&#26679;&#25105;&#20204;&#30340;&#36827;&#31243;&#23601;&#22833;&#21435;&#20102;
						&#25511;&#21046;&#32456;&#31471;&#65292;&#31243;&#24207;&#30340;&#36755;&#20837;&#36755;&#20986;&#20063;&#23558;&#19982;&#25511;&#21046;&#32456;&#31471;&#26080;&#20851;&#12290;</p></li><li class="step" title="Step 4"><p>&#23558;&#24403;&#21069;&#30446;&#24405;&#26356;&#25913;&#20026;&#26681;&#30446;&#24405;&#65292;&#26377;&#26102;&#31243;&#24207;&#20174;&#19968;&#20010;&#26242;&#26102;&#24615;&#25346;&#36733;
						&#30340;&#25991;&#20214;&#31995;&#32479;&#20013;&#21551;&#21160;&#65292;&#26410;&#24517;&#20813;&#35813;&#25991;&#20214;&#31995;&#32479;&#21368;&#36733;&#21518;&#23432;&#25252;&#36827;&#31243;&#20986;&#38169;&#65292;
						&#36825;&#26159;&#24517;&#35201;&#30340;&#27493;&#39588;&#12290;</p></li><li class="step" title="Step 5"><p>&#20851;&#38381;&#19981;&#38656;&#35201;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#12290;
						&#21487;&#20197;&#35843;&#29992;getrlimit&#33719;&#24471;&#26368;&#39640;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#20540;&#65292;&#20381;&#27425;&#20851;&#38381;&#12290;
						&#35201;&#27880;&#24847;&#30340;&#26159;&#65292;&#35843;&#29992;Daemonize&#20043;&#21069;&#25171;&#24320;&#30340;&#25991;&#20214;&#25551;&#36848;&#31526;&#20250;&#20851;&#38381;&#65292;
						&#22914;&#26524;&#21518;&#38754;&#20195;&#30721;&#20381;&#36182;&#36825;&#20123;&#25991;&#20214;&#25551;&#36848;&#31526;&#65292;&#20250;&#20986;&#29616;&#19968;&#20123;&#22256;&#25200;&#12290;
						&#33509;&#24819;&#20351;&#29992;&#19968;&#20123;&#19982;&#25991;&#20214;&#25551;&#36848;&#31526;&#30456;&#20851;&#30340;&#23545;&#35937;&#65292;&#24212;&#35813;&#22312;&#35843;&#29992;Daemonize&#20043;&#21518;&#65292;
						&#31867;&#20284;socket&#36825;&#20123;&#12290;</p></li><li class="step" title="Step 6"><p>&#25171;&#24320;/dev/null&#20351;&#20043;&#19982;&#25991;&#20214;&#25551;&#36848;&#31526;0&#65292;1&#65292;2&#20851;&#32852;&#65292;
						&#20063;&#23601;&#35828;&#20219;&#20309;&#19982;&#26631;&#20934;&#36755;&#20837;&#65292;&#26631;&#20934;&#36755;&#20986;&#65292;&#26631;&#20934;&#20986;&#38169;&#26377;&#20851;&#30340;&#25805;&#20316;&#37117;&#20250;&#22833;&#25928;&#12290;
						&#36825;&#26679;&#30495;&#27491;&#20351;&#23432;&#25252;&#36827;&#31243;&#19982;&#20132;&#20114;&#29992;&#25143;&#33073;&#31163;&#20851;&#31995;&#12290;</p></li></ol></div></div></div><div class="sect2" title="4.3 &#27969;&#31243;&#36923;&#36753;"><div class="titlepage"><div><div><h3 class="title"><a name="idp76480"></a>4.3 &#27969;&#31243;&#36923;&#36753;</h3></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1">&#21021;&#22987;&#21270;&#37197;&#32622;&#25991;&#20214;&#23545;&#35937;</li><li class="step" title="Step 2">&#35843;&#29992;Daemonize&#25104;&#20026;&#23432;&#25252;&#36827;&#31243;</li><li class="step" title="Step 3">&#26681;&#25454;&#37197;&#32622;&#25991;&#20214;&#20013;&#30340;&#21442;&#25968;&#65292;&#23558;socket&#32465;&#23450;&#33267;&#32473;&#23450;&#31471;&#21475;</li><li class="step" title="Step 4">&#21551;&#21160;&#21508;&#31181;&#27169;&#22359;</li><li class="step" title="Step 5">&#33509;&#36864;&#20986;&#26631;&#24535;&#34987;&#35774;&#20026;true&#65292;&#36716;&#33267;step 8</li><li class="step" title="Step 6">&#38459;&#22622;&#29255;&#21051;&#65292;&#21028;&#26029;socket&#26159;&#21542;&#26377;&#25968;&#25454;&#21040;&#26469;&#65292;&#33509;&#26377;&#21017;&#35843;&#29992;&#30456;&#24212;&#22788;&#29702;&#20989;&#25968;</li><li class="step" title="Step 7">&#25805;&#20316;&#19979;&#36733;&#25991;&#20214;&#31649;&#29702;&#27169;&#22359;&#65292;&#28982;&#21518;&#36716;&#33267;step 6</li><li class="step" title="Step 8">&#20572;&#27490;&#21508;&#27169;&#22359;&#65292;&#37322;&#25918;&#36164;&#28304;&#24182;&#36864;&#20986;</li></ol></div></div></div><div class="sect1" title="5 &#19979;&#36733;&#25991;&#20214;&#31649;&#29702;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp80064"></a>5 &#19979;&#36733;&#25991;&#20214;&#31649;&#29702;&#27169;&#22359;</h2></div></div></div><div class="sect2" title="5.1 &#35774;&#35745;&#26041;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="idp80384"></a>5.1 &#35774;&#35745;&#26041;&#27861;</h3></div></div></div><div class="sect3" title="5.1.1 CDownloadFile"><div class="titlepage"><div><div><h4 class="title"><a name="idp80680"></a>5.1.1 CDownloadFile</h4></div></div></div><p>&#29992;CDownloadFile&#31867;&#36127;&#36131;&#27599;&#20010;&#19979;&#36733;&#25991;&#20214;&#65292;&#35813;&#31867;&#21253;&#21547;&#19979;&#36733;&#25991;&#20214;&#30340;&#24517;&#35201;&#20449;&#24687;&#65292;
					&#29992;&#19968;&#20010;&#32447;&#31243;&#21551;&#21160;&#24037;&#20316;&#20989;&#25968;&#12290;</p><p>&#24037;&#20316;&#20989;&#25968;&#19981;&#26029;&#24490;&#29615;&#65292;&#27599;&#20010;&#21608;&#26399;&#20570;&#20197;&#19979;&#24037;&#20316;</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1">&#35831;&#27714;&#19979;&#36733;&#36164;&#28304;&#65292;&#21363;&#25991;&#20214;&#25317;&#26377;&#32773;&#30340;&#20449;&#24687;</li><li class="step" title="Step 2">&#22788;&#29702;&#24050;&#24471;&#21040;&#30340;&#19979;&#36733;&#36164;&#28304;&#65292;&#23545;&#26410;&#39564;&#35777;&#30340;&#36164;&#28304;&#21457;&#36865;&#39564;&#35777;&#35831;&#27714;,
						&#39564;&#35777;&#25104;&#21151;&#30340;&#36164;&#28304;&#31216;&#20026;&#24037;&#20316;&#36164;&#28304;&#65292;&#23545;&#24037;&#20316;&#36164;&#28304;&#36718;&#27969;&#35831;&#27714;&#25991;&#20214;&#22359;&#12290;</li><li class="step" title="Step 3">&#35843;&#29992;I/O&#22797;&#29992;&#20989;&#25968;select&#65292;&#38459;&#22622;&#19968;&#23450;&#26102;&#38388;&#65292;&#21028;&#26029;socket
						&#19978;&#26159;&#21542;&#26377;&#25968;&#25454;&#21040;&#26469;&#65292;&#33509;&#26377;&#65292;&#21017;&#35843;&#29992;&#21327;&#35758;&#35299;&#26512;&#27169;&#22359;&#30340;&#25509;&#21475;&#36827;&#34892;&#22788;&#29702;&#12290;</li></ol></div><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25968;&#25454;&#25104;&#21592;</th><th>&#27880;&#37322;</th></tr></thead><tbody><tr><td>std::string m_MD5;</td><td>&#25991;&#20214;MD5&#21704;&#24076;&#20540;</td></tr><tr><td>KDownStatus m_Status;</td><td>&#19979;&#36733;&#29366;&#24577;</td></tr><tr><td>pthread_t m_Thread;</td><td>&#24037;&#20316;&#32447;&#31243;&#25551;&#36848;&#31526;</td></tr><tr><td>int m_Socket;</td><td>&#22871;&#25509;&#23383;&#25551;&#36848;&#31526;</td></tr><tr><td>std::vector&lt;TPeer&gt; m_VecSource;</td><td>&#24453;&#39564;&#35777;&#30340;&#36164;&#28304;</td></tr><tr><td>std::list&lt;TPeer&gt; m_WorkSource;</td><td>&#24037;&#20316;&#36164;&#28304;</td></tr><tr><td>CConfig* m_Config;</td><td>&#37197;&#32622;&#23545;&#35937;&#30340;&#25351;&#38024;</td></tr><tr><td>CProtocolManager* m_Protocol;</td><td>&#21327;&#35758;&#35299;&#26512;&#23545;&#35937;&#30340;&#25351;&#38024;</td></tr><tr><td>CAdvancedFile* m_AdFile;</td><td>&#39640;&#32423;&#25991;&#20214;&#23545;&#35937;&#30340;&#25351;&#38024;</td></tr><tr><td>CKad* m_Kad;</td><td>Kad&#32593;&#32476;&#23545;&#35937;&#30340;&#25351;&#38024;</td></tr></tbody></table></div></div><div class="sect3" title="5.1.2 CAdvancedFile"><div class="titlepage"><div><div><h4 class="title"><a name="idp3435112"></a>5.1.2 CAdvancedFile</h4></div></div></div><p>&#20197;&#22266;&#23450;&#25968;&#37327;&#65288;&#22914;1024&#65289;&#23383;&#33410;&#20026;&#21333;&#20301;&#30340;&#25991;&#20214;&#20869;&#23481;&#31216;&#20026;&#25991;&#20214;&#22359;&#65292;
					CAdvancedFile&#31867;&#23553;&#35013;&#19968;&#31995;&#21015;&#20197;&#25991;&#20214;&#22359;&#20026;&#21333;&#20301;&#30340;&#25805;&#20316;&#12290;
					&#20026;&#25903;&#25345;&#26029;&#28857;&#32493;&#20256;&#21151;&#33021;&#65292;&#22788;&#29702;&#25991;&#20214;&#26412;&#36523;&#20043;&#22806;&#65292;&#30456;&#24212;&#36824;&#38656;&#35201;&#19968;&#20010;&#36741;&#21161;&#25991;&#20214;&#12290;
					&#36741;&#21161;&#25991;&#20214;&#20013;&#30340;&#27599;&#20010;&#23383;&#33410;&#23545;&#24212;&#33258;&#36523;&#25991;&#20214;&#30340;&#27599;&#20010;&#25991;&#20214;&#22359;&#65292;&#29992;&#20197;&#26631;&#35760;&#35813;&#25991;&#20214;&#22359;&#26159;&#21542;&#24050;&#20889;&#20837;&#12290;
					&#20063;&#23601;&#26159;&#35828;&#23545;&#33258;&#36523;&#25991;&#20214;&#36827;&#34892;&#23545;&#25805;&#20316;&#26102;&#20808;&#24471;&#21028;&#26029;&#36741;&#21161;&#25991;&#20214;&#30456;&#24212;&#23383;&#33410;&#30340;&#20869;&#23481;&#65292;
					&#32780;&#23545;&#33258;&#36523;&#25991;&#20214;&#36827;&#34892;&#20889;&#25805;&#20316;&#26102;&#38500;&#20102;&#20808;&#21028;&#26029;&#36741;&#21161;&#25991;&#20214;&#30456;&#24212;&#23383;&#33410;&#20869;&#23481;&#22806;&#65292;
					&#23436;&#25104;&#20889;&#25805;&#20316;&#21518;&#65292;&#36824;&#24212;&#20462;&#25913;&#36741;&#21161;&#25991;&#20214;&#30456;&#24212;&#23383;&#33410;&#20869;&#23481;&#20869;&#23481;&#12290;</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25968;&#25454;&#25104;&#21592;</th><th>&#27880;&#37322;</th></tr></thead><tbody><tr><td>std::string m_Filename;</td><td>&#33258;&#36523;&#25991;&#20214;&#25991;&#20214;&#21517;</td></tr><tr><td>std::string m_BlockFilename;</td><td>&#36741;&#21161;&#25991;&#20214;&#25991;&#20214;&#21517;</td></tr><tr><td>CFileStream* m_FileStream;</td><td>&#33258;&#36523;&#25991;&#20214;&#25991;&#20214;&#27969;&#23545;&#35937;&#30340;&#25351;&#38024;</td></tr><tr><td>CFileStream* m_BlockStream;</td><td>&#36741;&#21161;&#25991;&#20214;&#25991;&#20214;&#27969;&#23545;&#35937;&#30340;&#25351;&#38024;</td></tr><tr><td>Int64 m_Size;</td><td>&#25991;&#20214;&#22823;&#23567;&#65292;&#21333;&#20301;&#20026;&#23383;&#33410;</td></tr><tr><td>Int64 m_BlockNum;</td><td>&#25991;&#20214;&#22359;&#25968;&#37327;</td></tr><tr><td>Int64 m_BlockOk;</td><td>&#24050;&#23436;&#25104;&#25991;&#20214;&#22359;&#25968;&#37327;</td></tr></tbody></table></div></div><div class="sect3" title="5.1.3 &#23545;&#20010;CDownloadFile&#30340;&#31649;&#29702;"><div class="titlepage"><div><div><h4 class="title"><a name="idp3441296"></a>5.1.3 &#23545;&#20010;CDownloadFile&#30340;&#31649;&#29702;</h4></div></div></div><p>&#22312;&#20027;&#27169;&#22359;&#20013;&#29992;&#20840;&#23616;&#21464;&#37327;std::vector&lt;CDownloadFile*&gt; g_Manager
					&#31649;&#29702;&#65292;&#27599;&#27425;&#24490;&#29615;&#26816;&#26597;&#27599;&#20010;CDownloadFile&#23545;&#35937;&#30340;&#29366;&#24577;&#65292;&#23436;&#25104;&#25110;&#20986;&#38169;&#30340;&#23545;&#35937;&#37322;&#25918;&#12290;
					&#22312;&#20027;&#27169;&#22359;&#36864;&#20986;&#26102;&#65292;&#20063;&#37322;&#25918;&#25152;&#26377;&#30340;CDownloadFile&#23545;&#35937;&#12290;</p></div></div><div class="sect2" title="5.2 &#27969;&#31243;&#36923;&#36753;"><div class="titlepage"><div><div><h3 class="title"><a name="idp3442648"></a>5.2 &#27969;&#31243;&#36923;&#36753;</h3></div></div></div><p>CDownloadFile&#30340;&#24037;&#20316;&#32447;&#31243;</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1">&#21021;&#22987;&#21270;socket</li><li class="step" title="Step 2">&#33509;&#19979;&#36733;&#26631;&#24535;&#19981;&#20026;DS_RUNNING&#65292;&#21017;&#36864;&#20986;</li><li class="step" title="Step 3">&#26356;&#26032;&#19979;&#36733;&#25991;&#20214;&#30340;&#20449;&#24687;&#22914;&#19979;&#36733;&#36895;&#24230;&#31561;</li><li class="step" title="Step 4">&#35831;&#27714;&#36164;&#28304;</li><li class="step" title="Step 5">&#39564;&#35777;&#36164;&#28304;&#65292;&#21521;&#24037;&#20316;&#36164;&#28304;&#35831;&#27714;&#25991;&#20214;&#22359;</li><li class="step" title="Step 6">&#21028;&#26029;socket&#19978;&#26159;&#21542;&#26377;&#25968;&#25454;&#21040;&#26469;&#65292;&#26377;&#21017;&#35843;&#29992;&#21327;&#35758;&#35299;&#26512;&#27169;&#22359;&#30340;&#30456;&#20851;&#20989;&#25968;&#22788;&#29702;</li><li class="step" title="Step 7">&#36716;&#33267;step 2</li></ol></div></div><div class="sect2" title="5.3 &#25509;&#21475;"><div class="titlepage"><div><div><h3 class="title"><a name="idp3445856"></a>5.3 &#25509;&#21475;</h3></div></div></div><div class="sect3" title="5.3.1 CDownloadFile&#25509;&#21475;"><div class="titlepage"><div><div><h4 class="title"><a name="idp3446112"></a>5.3.1 CDownloadFile&#25509;&#21475;</h4></div></div></div><p>&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#65292;CDownloadFile&#19981;&#36127;&#36131;&#25509;&#25910;&#20197;&#21450;&#35299;&#26512;&#28040;&#24687;&#65292;&#28040;&#24687;&#20132;&#30001;
				&#21327;&#35758;&#35299;&#26512;&#27169;&#22359;&#22788;&#29702;&#65292;CDownloadFile&#25552;&#20379;&#22238;&#35843;&#20989;&#25968;&#20316;&#20026;&#25509;&#21475;&#65292;
				&#35753;&#21327;&#35758;&#35299;&#26512;&#27169;&#22359;&#21487;&#20197;&#26681;&#25454;&#19981;&#21516;&#30340;&#28040;&#24687;&#20869;&#23481;&#25805;&#20316;CDownloadFile&#23545;&#35937;&#12290;</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25509;&#21475;</th><th>&#21151;&#33021;</th></tr></thead><tbody><tr><td>bool Start(CConfig*);</td><td>&#21551;&#21160;</td></tr><tr><td>void Stop();</td><td>&#36864;&#20986;</td></tr><tr><td>void DealSourceResponse(const unsigned char* hexHash, 
						unsigned long filesize, std::vector&lt;TPeer&gt;* vec);</td><td>&#22238;&#35843;&#20989;&#25968;&#65292;&#22788;&#29702;&#26381;&#21153;&#22120;&#22238;&#22797;&#30340;&#25991;&#20214;&#25317;&#26377;&#32773;&#20449;&#24687;</td></tr><tr><td>void DealCheckResult(const unsigned char* hexHash, 
						unsigned long sessionID, char status);</td><td>&#22238;&#35843;&#20989;&#25968;&#65292;&#22788;&#29702;&#39564;&#35777;&#22238;&#22797;</td></tr><tr><td>void DealFileData(const unsigned char* hexHash,
						unsigned long offset, const char* src, unsigned long size);</td><td>&#22238;&#35843;&#20989;&#25968;&#65292;&#22788;&#29702;&#25509;&#25910;&#30340;&#25991;&#20214;&#22359;</td></tr><tr><td>void GetDetail(KDownStatus&amp; status, 
						char&amp; percent, std::string&amp; md5, time_t&amp; past, unsigned short&amp; speed);</td><td>&#33719;&#21462;&#19979;&#36733;&#25991;&#20214;&#30340;&#35814;&#32454;&#29366;&#24577;</td></tr></tbody></table></div></div></div></div><div class="sect1" title="6 &#25991;&#20214;&#19978;&#20256;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp3451552"></a>6 &#25991;&#20214;&#19978;&#20256;&#27169;&#22359;</h2></div></div></div><div class="sect2" title="6.1 &#27969;&#31243;&#36923;&#36753;"><div class="titlepage"><div><div><h3 class="title"><a name="idp3451856"></a>6.1 &#27969;&#31243;&#36923;&#36753;</h3></div></div></div><p>&#25171;&#24320;&#19968;&#20010;&#32447;&#31243;&#25191;&#34892;&#24037;&#20316;&#20989;&#25968;&#65292;&#29992;select&#20989;&#25968;&#21028;&#26029;socket&#19978;&#26159;&#21542;&#26377;&#25968;&#25454;&#21040;&#26469;&#65292;
				&#33509;&#26377;&#21017;&#20132;&#32473;&#21327;&#35758;&#35299;&#26512;&#27169;&#22359;&#25509;&#25910;&#21450;&#35299;&#26512;&#12290;</p></div><div class="sect2" title="6.2 &#25509;&#21475;"><div class="titlepage"><div><div><h3 class="title"><a name="idp3452568"></a>6.2 &#25509;&#21475;</h3></div></div></div><div class="sect3" title="6.2.1 CUploadFile&#25509;&#21475;"><div class="titlepage"><div><div><h4 class="title"><a name="idp3452824"></a>6.2.1 CUploadFile&#25509;&#21475;</h4></div></div></div><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#25509;&#21475;</th><th>&#21151;&#33021;</th></tr></thead><tbody><tr><td>unsigned long GetFileData(const unsigned char* hexHash, 
						unsigned long offset, unsigned long size, char* dst);</td><td>&#33719;&#21462;&#32473;&#23450;&#25991;&#20214;&#30340;&#25991;&#20214;&#20869;&#23481;</td></tr></tbody></table></div></div></div></div><div class="sect1" title="7 &#21327;&#35758;&#35299;&#26512;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp3455088"></a>7 &#21327;&#35758;&#35299;&#26512;&#27169;&#22359;</h2></div></div></div><p>CProtocolManager&#31867;&#23553;&#35013;&#20102;&#21327;&#35758;&#35299;&#26512;&#30340;&#25805;&#20316;&#65292;&#26680;&#24515;&#22312;&#20110;&#21327;&#35758;&#30340;&#23450;&#20041;&#12290;</p><div class="sect2" title="7.1 &#21327;&#35758;&#30340;&#35814;&#32454;&#23450;&#20041;"><div class="titlepage"><div><div><h3 class="title"><a name="idp3455760"></a>7.1 &#21327;&#35758;&#30340;&#35814;&#32454;&#23450;&#20041;</h3></div></div></div><p>&#28040;&#24687;&#30340;&#39318;&#23383;&#33410;&#20915;&#23450;&#20102;&#23427;&#30340;&#21629;&#20196;&#31867;&#22411;&#12290;&#19979;&#38754;&#20197;&#34920;&#26684;&#24418;&#24335;&#25551;&#36848;&#27599;&#31181;&#28040;&#24687;&#30340;&#26500;&#25104;&#12290;</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#21629;&#20196;&#31867;&#22411;</th><th>&#26684;&#24335;</th></tr></thead><tbody><tr><td>0x01 login</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>commandID 0x01</td></tr><tr><td>unsigned short</td><td>2</td><td>peerPort</td></tr><tr><td>unsigned long</td><td>4</td><td>&#25991;&#20214;&#30340;&#25968;&#37327;&#65292;N</td></tr><tr><td>unsigned char*</td><td>20</td><td>&#31532;1&#20010;&#25991;&#20214;&#30340;&#20449;&#24687;</td></tr><tr><td>...</td><td>...</td><td>...</td></tr><tr><td>unsigned char*</td><td>20</td><td>&#31532;N&#20010;&#25991;&#20214;&#30340;&#20449;&#24687;</td></tr></tbody></table></td></tr><tr><td>0x04 request source of a hash</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>commandID 0x04</td></tr><tr><td>unsigned char*</td><td>16</td><td>MD5&#21704;&#24076;&#20540;</td></tr></tbody></table></td></tr><tr><td>0x14 request result</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>commandID 0x14</td></tr><tr><td>char</td><td>16</td><td>MD5&#21704;&#24076;&#20540;</td></tr><tr><td>unsigned long</td><td>4</td><td>&#25991;&#20214;&#22823;&#23567;</td></tr><tr><td>char</td><td>1</td><td>&#25991;&#20214;&#25317;&#26377;&#32773;&#20449;&#24687;&#30340;&#25968;&#37327;&#65292;N</td></tr><tr><td>long</td><td>4</td><td>IP&#22320;&#22336;</td></tr><tr><td>short</td><td>2</td><td>&#31471;&#21475;</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody></table></td></tr><tr><td>0x21 check</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>commandID 0x21</td></tr><tr><td>unsigned char*</td><td>16</td><td>MD5&#21704;&#24076;&#20540;</td></tr><tr><td>unsigned long</td><td>4</td><td>sessionID</td></tr></tbody></table></td></tr><tr><td>0x22 get file data</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>commandID 0x22</td></tr><tr><td>unsigned char*</td><td>16</td><td>MD5&#21704;&#24076;&#20540;</td></tr><tr><td>long</td><td>4</td><td>&#36215;&#22987;&#25991;&#20214;&#22359;</td></tr><tr><td>long</td><td>4</td><td>&#32456;&#27490;&#25991;&#20214;&#22359;</td></tr></tbody></table></td></tr><tr><td>0x31 check result</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>commandID 0x31</td></tr><tr><td>unsigned char*</td><td>16</td><td>MD5&#21704;&#24076;&#20540;</td></tr><tr><td>unsigned long</td><td>4</td><td>sessionID</td></tr><tr><td>char</td><td>1</td><td>&#39564;&#35777;&#32467;&#26524;</td></tr></tbody></table></td></tr><tr><td>0x32 file data</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>commandID 0x32</td></tr><tr><td>unsigned c*har</td><td>16</td><td>MD5&#21704;&#24076;&#20540;</td></tr><tr><td>long</td><td>4</td><td>&#36215;&#22987;&#25991;&#20214;&#22359;</td></tr><tr><td>long</td><td>4</td><td>&#25991;&#20214;&#20869;&#23481;&#22823;&#23567;&#65292;N</td></tr><tr><td>char*</td><td>N</td><td>&#25991;&#20214;&#20869;&#23481;</td></tr></tbody></table></td></tr></tbody></table></div></div></div><div class="sect1" title="8 &#25991;&#20214;&#31995;&#32479;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp3484504"></a>8 &#25991;&#20214;&#31995;&#32479;&#27169;&#22359;</h2></div></div></div><div class="sect2" title="8.1 &#35774;&#35745;&#26041;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="idp3484760"></a>8.1 &#35774;&#35745;&#26041;&#27861;</h3></div></div></div><p>&#21551;&#21160;&#19968;&#20010;&#32447;&#31243;&#65292;&#21608;&#26399;&#25195;&#25551;&#32473;&#23450;&#30446;&#24405;&#65292;
				&#23558;&#24471;&#21040;&#30340;&#25991;&#20214;&#20449;&#24687;&#23384;&#20648;&#33267;&#25968;&#25454;&#24211;&#24182;&#20197;login&#30340;&#28040;&#24687;&#21457;&#36865;&#32473;&#26381;&#21153;&#22120;&#12290;</p><p>&#25195;&#25551;&#30446;&#24405;&#30340;&#31639;&#27861;&#26412;&#36136;&#26159;&#24191;&#24230;&#20248;&#20808;&#25628;&#32034;&#31639;&#27861;&#12290;</p><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1">&#23558;&#32473;&#23450;&#30446;&#24405;&#21152;&#20837;&#38431;&#21015;</li><li class="step" title="Step 2">&#33509;&#38431;&#21015;&#20026;&#31354;&#65292;&#21017;&#36864;&#20986;</li><li class="step" title="Step 3">&#21462;&#20986;&#38431;&#21015;&#22836;&#20803;&#32032;</li><li class="step" title="Step 4">&#33509;&#35813;&#20803;&#32032;&#20026;&#25991;&#20214;&#65292;&#21017;&#25628;&#38598;&#20854;&#20449;&#24687;&#65292;
					&#33509;&#20803;&#32032;&#20026;&#30446;&#24405;&#65292;&#21017;&#20854;&#21253;&#21547;&#30340;&#23376;&#25991;&#20214;&#21450;&#23376;&#30446;&#24405;&#20381;&#27425;&#21152;&#20837;&#38431;&#21015;</li><li class="step" title="Step 5">&#36716;&#21040;step 2</li></ol></div></div></div><div class="sect1" title="9 Kad&#32593;&#32476;&#27169;&#22359;"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp3487624"></a>9 Kad&#32593;&#32476;&#27169;&#22359;</h2></div></div></div><div class="sect2" title="9.1 Kad&#21327;&#35758;&#30340;&#35814;&#32454;&#23450;&#20041;"><div class="titlepage"><div><div><h3 class="title"><a name="idp3487880"></a>9.1 Kad&#21327;&#35758;&#30340;&#35814;&#32454;&#23450;&#20041;</h3></div></div></div><p>&#28040;&#24687;&#30340;&#39318;&#23383;&#33410;&#20915;&#23450;&#20102;&#23427;&#30340;&#21629;&#20196;&#31867;&#22411;&#12290;&#19979;&#38754;&#20197;&#34920;&#26684;&#24418;&#24335;&#25551;&#36848;&#27599;&#31181;&#28040;&#24687;&#30340;&#26500;&#25104;&#12290;</p><div class="informaltable"><table border="1"><colgroup><col><col></colgroup><thead><tr><th>&#21629;&#20196;&#31867;&#22411;</th><th>&#26684;&#24335;</th></tr></thead><tbody><tr><td>0x40 PING request</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>0x40</td></tr><tr><td>unsigned char*</td><td>16</td><td>&#21457;&#36865;&#26041;&#30340;NodeID</td></tr><tr><td>short</td><td>2</td><td>&#21457;&#36865;&#35813;&#28040;&#24687;&#30340;CTask&#23545;&#35937;&#30340;TaskID</td></tr></tbody></table></td></tr><tr><td>0x41 PING response</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>0x41</td></tr><tr><td>unsigned char*</td><td>16</td><td>&#21457;&#36865;&#26041;&#30340;NodeID</td></tr><tr><td>short</td><td>2</td><td>&#21457;&#36865;&#35813;&#28040;&#24687;&#30340;CTask&#23545;&#35937;&#30340;TaskID</td></tr></tbody></table></td></tr><tr><td>0x42 STORE request</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>0x42</td></tr><tr><td>unsigned char*</td><td>16</td><td>&#21457;&#36865;&#26041;&#30340;NodeID</td></tr><tr><td>short</td><td>2</td><td>&#21457;&#36865;&#35813;&#28040;&#24687;&#30340;CTask&#23545;&#35937;&#30340;TaskID</td></tr><tr><td>unsigned char*</td><td>16</td><td>key</td></tr><tr><td>unsigned long</td><td>4</td><td>IP&#22320;&#22336;</td></tr><tr><td>unsigned short</td><td>2</td><td>&#31471;&#21475;</td></tr><tr><td>unsigned long</td><td>4</td><td>&#25991;&#20214;&#22823;&#23567;</td></tr></tbody></table></td></tr><tr><td>0x44 FIND_NODE reuqest</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>0x44</td></tr><tr><td>unsigned char*</td><td>16</td><td>&#21457;&#36865;&#26041;&#30340;NodeID</td></tr><tr><td>short</td><td>2</td><td>&#21457;&#36865;&#35813;&#28040;&#24687;&#30340;CTask&#23545;&#35937;&#30340;TaskID</td></tr><tr><td>unsigned char*</td><td>16</td><td>NodeID</td></tr></tbody></table></td></tr><tr><td>0x45 FIND_NODE response</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>0x45</td></tr><tr><td>unsigned char*</td><td>16</td><td>&#21457;&#36865;&#26041;&#30340;NodeID</td></tr><tr><td>short</td><td>2</td><td>&#21457;&#36865;&#35813;&#28040;&#24687;&#30340;CTask&#23545;&#35937;&#30340;TaskID</td></tr><tr><td>char</td><td>1</td><td>Node&#30340;&#25968;&#37327;&#65292;N</td></tr><tr><td>unsigned logn</td><td>4</td><td>IP&#22320;&#22336;</td></tr><tr><td>unsgned short</td><td>2</td><td>Kad&#31471;&#21475;</td></tr><tr><td>unsigned char*</td><td>16</td><td>NodeID</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody></table></td></tr><tr><td>0x46 FIND_VALUE request</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>0x46</td></tr><tr><td>unsigned char*</td><td>16</td><td>&#21457;&#36865;&#26041;&#30340;NodeID</td></tr><tr><td>short</td><td>2</td><td>&#21457;&#36865;&#35813;&#28040;&#24687;&#30340;CTask&#23545;&#35937;&#30340;TaskID</td></tr><tr><td>unsigned char*</td><td>16</td><td>key</td></tr></tbody></table></td></tr><tr><td>0x47 FIND_VALUE response</td><td><table width="100%" border="0"><colgroup><col><col><col></colgroup><thead><tr><th>C++&#25968;&#25454;&#31867;&#22411;</th><th>&#23383;&#33410;&#25968;</th><th>&#22791;&#27880;</th></tr></thead><tbody><tr><td>char</td><td>1</td><td>0x47</td></tr><tr><td>unsigned char*</td><td>16</td><td>&#21457;&#36865;&#26041;&#30340;NodeID</td></tr><tr><td>unsigned long</td><td>4</td><td>&#21457;&#36865;&#35813;&#28040;&#24687;&#30340;CTask&#23545;&#35937;&#30340;TaskID</td></tr><tr><td>unsigned char*</td><td>16</td><td>key</td></tr><tr><td>char</td><td>1</td><td>Value&#30340;&#20010;&#25968;</td></tr><tr><td>unsigned long</td><td>4</td><td>&#25991;&#20214;&#22823;&#23567;</td></tr><tr><td>unsigned long</td><td>4</td><td>IP&#22320;&#22336;</td></tr><tr><td>unsigned short</td><td>2</td><td>&#31471;&#21475;</td></tr><tr><td>...</td><td>...</td><td>...</td></tr></tbody></table></td></tr></tbody></table></div></div><div class="sect2" title="9.2 &#35774;&#35745;&#26041;&#27861;"><div class="titlepage"><div><div><h3 class="title"><a name="idp3520224"></a>9.2 &#35774;&#35745;&#26041;&#27861;</h3></div></div></div><p>&#25972;&#20010;&#27169;&#22359;&#20250;&#21551;&#21160;&#19968;&#20010;&#32447;&#31243;&#25191;&#34892;&#24037;&#20316;&#20989;&#25968;&#65292;&#23427;&#23558;&#19981;&#26029;&#24490;&#29615;&#65292;
				&#22312;&#27599;&#27425;&#24490;&#29615;&#20013;&#65292;&#26356;&#26032;&#25152;&#26377;&#20219;&#21153;&#65292;&#30417;&#21548;&#28040;&#24687;&#65292;&#36824;&#38656;&#35201;&#23450;&#26399;&#21047;&#26032;&#36335;&#30001;&#34920;&#65292;&#37325;&#26032;&#21457;&#24067;&#20449;&#24687;&#12290;</p><div class="screenshot"><div class="mediaobject"><img src="res/kad.jpeg"><div class="caption"><p>&#22270;2&#65306;Kad&#32593;&#32476;&#27169;&#22359;</p></div></div></div><div class="sect3" title="9.2.1 CTask&#31561;"><div class="titlepage"><div><div><h4 class="title"><a name="idp3522112"></a>9.2.1 CTask&#31561;</h4></div></div></div><p>FIND_NODE &#36825;&#31867;RPC&#21457;&#36865;&#21518;&#65292;&#38656;&#35201;&#25509;&#25910;&#22238;&#22797;&#20877;&#32487;&#32493;&#25805;&#20316;&#65292;
					&#30001;&#20110;&#22238;&#22797;&#26159;&#19981;&#21487;&#39044;&#26399;&#30340;&#65292;&#19981;&#33021;&#19968;&#30452;&#38459;&#22622;&#22312;&#19968;&#20010;&#20219;&#21153;&#19978;&#65292;&#23553;&#35013;&#20102;CTaskManager
					&#26469;&#31649;&#29702;&#20219;&#21153;&#65292;&#23454;&#29616;&#20219;&#21153;&#30340;&#31867;&#24212;&#35813;&#25552;&#20379;&#19968;&#20010;Update&#30340;&#20989;&#25968;&#65292;&#35753;CTaskManager
					&#20027;&#21160;&#26356;&#26032;&#20219;&#21153;&#30340;&#29366;&#24577;&#65292;&#26681;&#25454;&#19981;&#21516;&#30340;&#29366;&#24577;&#25191;&#34892;&#19981;&#21516;&#30340;&#25805;&#20316;&#12290;
					&#32771;&#34385;&#21040;&#20219;&#21153;&#30340;&#31181;&#31867;&#26377;&#22810;&#31181;&#65292;&#20351;&#29992;&#22810;&#24577;&#26469;&#35299;&#20915;&#19981;&#21516;&#20219;&#21153;&#25191;&#34892;&#19981;&#21516;&#30340;&#26356;&#26032;&#25805;&#20316;&#12290;</p><div class="screenshot"><div class="mediaobject"><img src="res/task.jpeg"><div class="caption"><p>&#22270;3&#65306;CTask&#31561;</p></div></div></div></div></div></div></div></body></html>
